{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/user.schema.json",
  "title": "User Profile",
  "description": "A simple user profile with address, preferences and tags.",
  "type": "object",
  "$defs": {
    "duration": { "type": "number", "minimum": 0, "title": "Duration (months)" },
    "period": {
      "type": "object",
      "title": "Period",
      "properties": {
        "from": { "type": "string", "format": "date", "title": "From" },
        "to": { "type": "string", "format": "date", "title": "To" }
      }
    }
  },
  "required": ["name", "age", "email"],
  "properties": {
    "name": { "type": "string", "title": "Full Name", "minLength": 2, "description": "Your full legal name" },
    "email": { "type": "string", "format": "email", "title": "Email Address" },
    "age": {
      "type": "integer",
      "title": "Age",
      "oneOf": [
        { "minimum": 0, "maximum": 17, "title": "Minor" },
        { "minimum": 18, "title": "Adult" }
      ]
    },
    "website": { "type": "string", "format": "url", "title": "Personal Website", "description": "Optional" },
    "newsletter": { "type": "boolean", "title": "Subscribe to newsletter", "default": true },
    "favoriteColor": { "type": "string", "title": "Favorite Color", "enum": ["red", "green", "blue", "yellow", "purple"] },
    "accentColor": { "type": "string", "format": "color", "title": "Accent Color" },
    "tags": { "type": "array", "title": "Tags", "items": { "type": "string" }, "default": ["engineer", "gamer"] },
    "address": {
      "type": "object", "title": "Address", "required": ["street", "city"],
      "allOf": [
        { "properties": { "street": { "type": "string", "title": "Street" } } },
        { "properties": { "city": { "type": "string", "title": "City" } } },
        { "properties": { "zip": { "type": "string", "title": "ZIP", "pattern": "^[0-9]{5}$" } } }
      ]
    },
    "contact": {
      "type": "object", "title": "Contact",
      "properties": {
        "phone": { "type": "string", "title": "Phone" },
        "social": {
          "type": "object", "title": "Social",
          "properties": {
            "twitter": { "type": "string", "title": "Twitter" },
            "linkedin": { "type": "string", "title": "LinkedIn" }
          }
        }
      }
    },
    "workHistory": {
      "type": "array", "title": "Work History",
      "items": {
        "type": "object",
        "required": ["company"],
        "properties": {
          "company": { "type": "string", "title": "Company" },
          "role": { "type": "string", "title": "Role" },
          "period": { "$ref": "#/$defs/period" },
          "tenure": {
            "anyOf": [
              { "$ref": "#/$defs/duration" },
              { "type": "string", "title": "Tenure (text)" }
            ]
          }
        }
      },
      "minItems": 0
    },
    "projects": {
      "type": "array",
      "title": "Projects",
      "items": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": { "type": "string", "title": "Name" },
          "description": { "type": "string", "title": "Description" },
          "duration": { "$ref": "#/$defs/duration" },
          "links": {
            "type": "object", "title": "Links",
            "properties": {
              "github": { "type": "string", "format": "url", "title": "GitHub" },
              "demo": { "type": "string", "format": "url", "title": "Demo" }
            }
          }
        }
      },
      "minItems": 0,
      "default": []
    }
  }
}